# SkyWidget - åˆ†å¸ƒå¼ç¡¬ä»¶ç›‘æ§ä¸å‘Šè­¦ç³»ç»Ÿ

<p align="center">
  <strong>æ”¯æŒå±€åŸŸç½‘ P2P é€šä¿¡çš„åˆ†å¸ƒå¼ç¡¬ä»¶ç›‘æ§ä¸å‘Šè­¦ç³»ç»Ÿ</strong>
</p>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ–¥ï¸ **å®æ—¶ç¡¬ä»¶ç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡å®æ—¶ç›‘æ§
- ğŸŒ **è‡ªåŠ¨èŠ‚ç‚¹å‘ç°**: åŸºäº mDNS çš„é›¶é…ç½®è®¾å¤‡å‘ç°
- ğŸ“¡ **P2P ç½‘ç»œé€šä¿¡**: åŒä¸€å±€åŸŸç½‘å†…èŠ‚ç‚¹è‡ªåŠ¨äº’è”
- ğŸ”” **æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ**: å¯è‡ªå®šä¹‰çš„å‘Šè­¦è§„åˆ™å’Œé˜ˆå€¼
- ğŸ“¨ **è·¨è®¾å¤‡é€šçŸ¥**: å‘Šè­¦ä¿¡æ¯è‡ªåŠ¨æ¨é€åˆ°ç½‘ç»œå†…å…¶ä»–èŠ‚ç‚¹
- ğŸ¨ **ç°ä»£åŒ– UI**: å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼
- ğŸ”Œ **HTTP REST API**: å¼€æ”¾ API æ¥å£ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ

## ğŸš€ æŠ€æœ¯æ ˆ

**å‰ç«¯**
- Svelte 5 + TailwindCSS 4 + Vite 6
- TypeScript

**åç«¯**
- Rust + Tauri 2.x
- Tokio å¼‚æ­¥è¿è¡Œæ—¶
- Warp HTTP æœåŠ¡å™¨
- mDNS-SD æœåŠ¡å‘ç°

**æ ¸å¿ƒä¾èµ–**
- `sysinfo` - è·¨å¹³å°ç¡¬ä»¶ç›‘æ§
- `mdns-sd` - æœ¬åœ°ç½‘ç»œè®¾å¤‡å‘ç°
- `warp` - HTTP/WebSocket æœåŠ¡å™¨
- `tokio` - å¼‚æ­¥è¿è¡Œæ—¶
- `sled` - è½»é‡çº§æ•°æ®å­˜å‚¨
- `notify-rust` - æ¡Œé¢é€šçŸ¥

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Rust 1.75+ (é€šè¿‡ rustup å®‰è£…)
- Node.js 20 LTS (æ¨èä½¿ç”¨ Scoop ç®¡ç†)
- pnpm 9+
- Windows: Visual Studio 2022 + WebView2

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# Rust ä¾èµ–ä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ä¸‹è½½
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (å¸¦çƒ­é‡è½½)
pnpm tauri:dev

# æŸ¥çœ‹æ—¥å¿—è¾“å‡º (å¯é€‰)
RUST_LOG=debug pnpm tauri:dev
```

### æ„å»ºå‘å¸ƒ

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm tauri:build

# æ„å»ºåçš„æ–‡ä»¶ä½äº:
# - Windows: src-tauri/target/release/SkyWidget.exe
# - Linux: src-tauri/target/release/skywidget
# - macOS: src-tauri/target/release/bundle/macos/
```

## ğŸ¯ åŠŸèƒ½è¯´æ˜

### 1. ç¡¬ä»¶ç›‘æ§

å®æ—¶ç›‘æ§ä»¥ä¸‹æŒ‡æ ‡ï¼ˆæ¯ç§’åˆ·æ–°ï¼‰ï¼š
- **CPU**: ä½¿ç”¨ç‡ã€æ ¸å¿ƒæ•°ã€é¢‘ç‡ã€å„æ ¸å¿ƒç‹¬ç«‹ä½¿ç”¨ç‡
- **å†…å­˜**: æ€»é‡ã€å·²ç”¨ã€å¯ç”¨ã€ä½¿ç”¨ç‡
- **ç£ç›˜**: å„åˆ†åŒºå®¹é‡ã€ä½¿ç”¨é‡ã€å¯ç”¨ç©ºé—´

### 2. ç½‘ç»œå‘ç°

- åŸºäº **mDNS/DNS-SD** åè®®è‡ªåŠ¨å‘ç°åŒä¸€å±€åŸŸç½‘å†…çš„ SkyWidget èŠ‚ç‚¹
- æ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œå³æ’å³ç”¨
- æ¯ 5 ç§’åˆ·æ–°èŠ‚ç‚¹åˆ—è¡¨
- è‡ªåŠ¨æ¸…ç†ç¦»çº¿èŠ‚ç‚¹ï¼ˆ30ç§’è¶…æ—¶ï¼‰
- æ”¯æŒ Tailscale/WireGuard ç­‰è™šæ‹Ÿå±€åŸŸç½‘

### 3. å‘Šè­¦ç³»ç»Ÿ

#### é»˜è®¤å‘Šè­¦è§„åˆ™

| è§„åˆ™åç§° | è§¦å‘æ¡ä»¶ | ä¸¥é‡çº§åˆ« | å†·å´æ—¶é—´ |
|---------|---------|---------|----------|
| CPU é«˜è´Ÿè½½å‘Šè­¦ | CPU > 80% | Warning | 5 åˆ†é’Ÿ |
| CPU ä¸¥é‡å‘Šè­¦ | CPU > 95% | Critical | 5 åˆ†é’Ÿ |
| å†…å­˜é«˜è´Ÿè½½å‘Šè­¦ | å†…å­˜ > 85% | Warning | 5 åˆ†é’Ÿ |
| ç£ç›˜é«˜è´Ÿè½½å‘Šè­¦ | ç£ç›˜ > 90% | Warning | 5 åˆ†é’Ÿ |

#### å‘Šè­¦é€šçŸ¥æ–¹å¼

1. **æœ¬åœ°æ¡Œé¢é€šçŸ¥**: å¼¹å‡ºç³»ç»Ÿé€šçŸ¥ï¼ˆWindows/macOS/Linuxï¼‰
2. **ç½‘ç»œæ¨é€**: è‡ªåŠ¨å‘é€åˆ°æ‰€æœ‰å·²å‘ç°çš„è¿œç¨‹èŠ‚ç‚¹
3. **å†·å´æœºåˆ¶**: é˜²æ­¢åŒä¸€å‘Šè­¦çŸ­æ—¶é—´å†…é‡å¤è§¦å‘

### 4. REST API

æ¯ä¸ªèŠ‚ç‚¹éƒ½è¿è¡Œä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼ˆç«¯å£ 3030ï¼‰ï¼Œæä¾›ä»¥ä¸‹æ¥å£ï¼š

```bash
# è·å–èŠ‚ç‚¹ç¡¬ä»¶ä¿¡æ¯
curl http://localhost:3030/hardware

# è·å–å·²å‘ç°çš„èŠ‚ç‚¹åˆ—è¡¨
curl http://localhost:3030/nodes

# å‘é€å‘Šè­¦é€šçŸ¥
curl -X POST http://localhost:3030/alerts/notify \
  -H "Content-Type: application/json" \
  -d '{
    "source_node_id": "xxx",
    "source_node_name": "Node-A",
    "alert_type": "cpu_high",
    "message": "CPU ä½¿ç”¨ç‡è¿‡é«˜",
    "severity": "Warning",
    "timestamp": 1234567890
  }'
```

## ğŸ”Œ Tailscale/WireGuard é›†æˆ

SkyWidget è‡ªåŠ¨æ”¯æŒè™šæ‹Ÿå±€åŸŸç½‘ï¼š

1. **Tailscale ç”¨æˆ·**: ç¡®ä¿æ‰€æœ‰è®¾å¤‡å·²è¿æ¥åˆ°åŒä¸€ Tailnetï¼ŒSkyWidget ä¼šè‡ªåŠ¨å‘ç°
2. **WireGuard ç”¨æˆ·**: é…ç½®å¥½ WireGuard ç½‘ç»œåï¼ŒèŠ‚ç‚¹ä¼šè‡ªåŠ¨äº’è”
3. **æ— éœ€é¢å¤–é…ç½®**: mDNS åœ¨è™šæ‹Ÿç½‘å¡ä¸Šä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ

## ğŸ¯ ä½¿ç”¨åœºæ™¯

- ğŸ  **å®¶åº­ç½‘ç»œç›‘æ§**: ç›‘æ§å®¶ä¸­æ‰€æœ‰ç”µè„‘çš„è¿è¡ŒçŠ¶æ€
- ğŸ¢ **å°å‹åŠå…¬å®¤**: å®æ—¶æŒæ¡åŠå…¬è®¾å¤‡å¥åº·çŠ¶å†µ
- ğŸ® **æ¸¸æˆå·¥ä½œå®¤**: ç›‘æ§å¤šå°æ¸¸æˆæœåŠ¡å™¨è´Ÿè½½
- ğŸ’» **å¼€å‘å›¢é˜Ÿ**: ç›‘æ§å¼€å‘ç¯å¢ƒå’Œæ„å»ºæœåŠ¡å™¨
- ğŸŒ **è¿œç¨‹åŠå…¬**: é€šè¿‡ Tailscale ç›‘æ§å¼‚åœ°è®¾å¤‡

## ğŸ› ï¸ å¼€å‘è®¡åˆ’

- [x] é¡¹ç›®è„šæ‰‹æ¶æ­å»º
- [x] åŸºç¡€ç¡¬ä»¶ç›‘æ§ (CPU/å†…å­˜/ç£ç›˜)
- [x] mDNS èŠ‚ç‚¹å‘ç°
- [x] HTTP REST API æœåŠ¡å™¨
- [x] å‘Šè­¦è§„åˆ™å¼•æ“
- [x] è·¨è®¾å¤‡å‘Šè­¦é€šçŸ¥
- [x] æ—¶åºæ•°æ®å­˜å‚¨
- [x] å‰ç«¯ç½‘ç»œæ‹“æ‰‘ç•Œé¢
- [x] å‰ç«¯å‘Šè­¦é…ç½®ç•Œé¢
- [ ] GPU ç›‘æ§ (NVIDIA)
- [ ] æ¸©åº¦ä¼ æ„Ÿå™¨ç›‘æ§
- [ ] ç³»ç»Ÿæ‰˜ç›˜é›†æˆ
- [ ] å‘Šè­¦å†å²æŸ¥çœ‹
- [ ] è‡ªå®šä¹‰å‘Šè­¦è§„åˆ™
- [ ] æ•°æ®å¯¼å‡º (JSON/CSV)
- [ ] WebSocket å®æ—¶æ¨é€
- [ ] ç§»åŠ¨ç«¯ APP

## ğŸ“ é¡¹ç›®ç»“æ„

```
tauri-monitor/
â”œâ”€â”€ src/                    # å‰ç«¯æºç  (Svelte)
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ components/    # Svelte ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ App.svelte         # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ app.css            # å…¨å±€æ ·å¼
â”œâ”€â”€ src-tauri/              # åç«¯æºç  (Rust)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main.rs        # Tauri ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ icons/             # åº”ç”¨å›¾æ ‡
â”‚   â”œâ”€â”€ capabilities/      # æƒé™é…ç½®
â”‚   â”œâ”€â”€ Cargo.toml         # Rust ä¾èµ–
â”‚   â””â”€â”€ tauri.conf.json    # Tauri é…ç½®
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ package.json           # å‰ç«¯ä¾èµ–
â””â”€â”€ vite.config.js         # Vite é…ç½®
```

## ğŸŒ ç½‘ç»œæ¶æ„

### èŠ‚ç‚¹å‘ç° (mDNS)
```
èŠ‚ç‚¹ A                èŠ‚ç‚¹ B                èŠ‚ç‚¹ C
  â”‚                     â”‚                     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€ mDNS â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€ mDNS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         è‡ªåŠ¨å‘ç°
```

### å‘Šè­¦é€šçŸ¥æµç¨‹
```
èŠ‚ç‚¹ A (æ£€æµ‹åˆ°å‘Šè­¦)
  â”‚
  â”œâ”€â–º æœ¬åœ°æ¡Œé¢é€šçŸ¥
  â”‚
  â””â”€â–º HTTP POST â†’ èŠ‚ç‚¹ B/C (å‘Šè­¦é€šçŸ¥)
                   â”‚
                   â””â”€â–º è§¦å‘è¿œç¨‹èŠ‚ç‚¹æ¡Œé¢é€šçŸ¥
```

### API ç«¯ç‚¹

æ‰€æœ‰èŠ‚ç‚¹é»˜è®¤åœ¨ç«¯å£ `3030` æä¾› HTTP APIï¼š

- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /node` - è·å–èŠ‚ç‚¹ä¿¡æ¯
- `GET /hardware` - è·å–ç¡¬ä»¶ç›‘æ§æ•°æ®
- `GET /nodes` - è·å–å·²å‘ç°çš„èŠ‚ç‚¹åˆ—è¡¨
- `POST /alerts/notify` - æ¥æ”¶å‘Šè­¦é€šçŸ¥

## ğŸ”§ ç³»ç»Ÿè¦æ±‚

### å¿…éœ€ä¾èµ–

**æ‰€æœ‰å¹³å°**
- Rust 1.75+ (é€šè¿‡ rustup å®‰è£…)
- Node.js 20 LTS
- pnpm 9+

**Linux é¢å¤–ä¾èµ–**
```bash
# Ubuntu/Debian
sudo apt-get install -y \
  libwebkit2gtk-4.1-dev \
  build-essential \
  curl \
  wget \
  file \
  libssl-dev \
  libayatana-appindicator3-dev \
  librsvg2-dev \
  libgtk-3-dev \
  libgdk-pixbuf-2.0-dev \
  libpango1.0-dev \
  libatk1.0-dev

# Fedora/RHEL
sudo dnf install \
  webkit2gtk4.1-devel \
  openssl-devel \
  gtk3-devel \
  libappindicator-gtk3-devel \
  librsvg2-devel
```

**Windows**
- Visual Studio 2022 Build Tools
- WebView2 Runtime (é€šå¸¸å·²é¢„è£…)

**macOS**
- Xcode Command Line Tools
```bash
xcode-select --install
```

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

Geoffrey Wang
